<!DOCTYPE html>
<html>
<head>
  <style>
    html, body {
      height: 100%;
    }
    
    body {
      background: orange;
      padding: 64px 0 0 0;
      margin: 0;
      
      -webkit-box-sizing: border-box;
      -moz-box-sizing:    border-box;
      box-sizing:         border-box;
      
      -webkit-transition: padding-top 0.33s linear;
      -moz-transition:    padding-top 0.33s linear;
      transition:         padding-top 0.33s linear;
    }
    
    .absolute {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3em;
      background: white;
    }
    
    .webdoc {
      position: absolute;
      top: 7em;
      height: 466px;
      min-height: 40%;
      left: 10%;
      width: 80%;
      
      background: yellow;
      
      /* Transitions can't go from % to length values. Boo, rubbish.
         We have to use a combination of height and min-height to get
         this to work. */
      -webkit-transition: width 0.33s linear, min-height 0.33s linear, top 0.33s linear, left 0.33s linear;
      -moz-transition:    width 0.33s linear, min-height 0.33s linear, top 0.33s linear, left 0.33s linear;
      transition:         width 0.33s linear, min-height 0.33s linear, top 0.33s linear, left 0.33s linear;
    }
    
    .sidebar {
      position: absolute;
      right: 0;
      top: 0;
      margin-right: -320px;
      width: 320px;
      background: red;
      height: 1000px;
      min-height: 100%;
    }
    
    .full_mode .webdoc {
      width: 100%;
      min-height: 100%;
      top: 3em; left: 0;
    }
    
    h1 {
      height: 2em;
      margin: 0;
      
      -webkit-transition: height 0.33s ease-in;
      -moz-transition:    height 0.33s ease-in;
      transition:         height 0.33s ease-in;
    }

    .full_mode h1 {
      height: 0;
    }

    .full_mode .sidebar {
      height: 200px;
    
      -webkit-transition: height 0.33s linear;
      -moz-transition:    height 0.33s linear;
      transition:         height 0.33s linear;
    }
    
  </style>
</head>
<body class="">
  
  <h1>Title</h1>
  
  <div class="webdoc">
    webdoc
    <div class="sidebar">
      
    </div>
  </div>
  
  <div class="absolute">
    Absolute
    <a href="#full">full</a>
  </div>
  
  <script src="../public/javascripts/jquery-1.4.2.js" type="text/javascript"></script>
  <script type="text/javascript">
    jQuery(document).ready(function(){
      
      jQuery('a[href=#full]')
      .toggle(function(e){
        
        jQuery('body').addClass('full_mode');
        e.preventDefault();
        
      }, function(e){
        
        jQuery('body').removeClass('full_mode');
        e.preventDefault();
        
      });
      
    });
  </script>
</body>
</html> 