<!DOCTYPE html>
<html>
<head>
  
  <style>
    body {
      background: #efefef;
    }
    canvas {
      border: 1px solid #dddddd;
    }
  </style>
</head>
<body>
  
  <label>shut</label>
  <input id="shut" type="range" min="0" max="1" step="0.02" value="0" />
  
  <script src="../public/javascripts/jquery-1.4.2.js" type="text/javascript"></script>
  <script src="js/wisp.js" type="text/javascript"></script>
  <script type="text/javascript">
    jQuery(document).ready(function(){
      
      jQuery('#shut')
      .bind('change', function(e){
        wisp
        .clear()
        .translate(32, 32)
        .scale(2, 2)
        .drawBody()
        .drawEyes({
          shut: parseFloat(this.value)
        });
      });
      
      function blink(){
        var start = {val: -1},
            end = {val: 1},
            delay = 10000 + Math.random() * 15000;
        
        jQuery(start)
        .delay(delay)
        .animate(end, {
          duration: 80,
          step: function(x){
            wisp
            .clear()
            .translate(32, 32)
            .scale(2, 2)
            .drawBody()
            .drawEyes({
              shut: 1 - (x*x)
            });
          },
          complete: function(){
            blink();
          }
        });
      }
      
      blink();
      
    });
  </script>
</body>
</html> 