- document_title @document.title
- session_key_name = ActionController::Base.session_options[:key]

%div#webdoc.scroll.layer
  %div.center
    %div#left-panel-ghost
      %div.panel-ghost
    %div.center-cell
      %div#board-container.center-box
        %div#document_loading
          %img{ :src => "/images/icons/waiting_bar.gif"}
        %div.board-screen.screen.layer
        %div.board-screen.screen.layer
        %div.board-screen.screen.layer
        %div.board-screen.screen.layer
    %div#right-panel-ghost
      %div.panel-ghost

= render :partial => "layouts/panels/toolbar_panel"
= render :partial => "layouts/panels/left_panel"
= render :partial => "layouts/panels/right_panel"

:javascript
  
  var WebDoc;
  if (!WebDoc) {
    WebDoc = {};
  }
  WebDoc.authData = {
    authToken:"#{protect_against_forgery? ? form_authenticity_token : ''}",
    sessionKeyName:"#{session_key_name}",
    cookiesSessionKeyName:"#{cookies[session_key_name]}"
  };
  WebDoc.run = function() {
    var editor = new WebDoc.PageEditor(#{@is_reader?'false':'true'});
    editor.load("#{@document.uuid}");
  } 